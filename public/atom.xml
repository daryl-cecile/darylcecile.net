<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://darylcecile.net</id>
    <title>Daryl Cecile</title>
    <updated>2022-06-05T17:21:07.382Z</updated>
    <generator>mFeed</generator>
    <author>
        <name>Daryl Cecile</name>
        <email>darylcecile@gmail.com</email>
        <uri>https://darylcecile.net</uri>
    </author>
    <link rel="alternate" href="https://darylcecile.net"/>
    <link rel="self" href="https://darylcecile.net/rss/atom"/>
    <subtitle>My notes</subtitle>
    <logo>https://darylcecile.net/images/core/header.png</logo>
    <icon>https://darylcecile.net/images/core/profile.ico</icon>
    <rights>Daryl Cecile ¬© 2022</rights>
    <entry>
        <title type="html"><![CDATA[Exploring the Chrome Extension context gaps]]></title>
        <id>excom-chrome-extension</id>
        <link href="https://darylcecile.net/notes/excom-chrome-extension"/>
        <updated>2022-06-03T23:00:00.000Z</updated>
        <content type="html"><![CDATA[<p>A couple of weeks ago, a conversation at work with my manager prompted me to revisit an old chrome extension I created a while<br />
back to help me manage my tab usage better.</p>
<p>The extension was born out of frustration for tab management; I was simply out of control.<br />
A simple workday could easily land me with 50+ tabs. So I created an extension called <a href="https://chrome.google.com/webstore/detail/alfred/mjlmoifgncbednjccpnhcjeifpfnjeon" target="_blank" rel="noopener" class="l" hreflang="en">Alfred</a><br />
that would automatically close tabs that I hadn‚Äôt used in a while. The experience was not something I enjoyed‚Ä¶ or wanted to repeat. So I pushed that side-project aside like a typical developer<br />
and avoided going back to it.</p>
<p>Fast-forward to the conversation with my manager, I realised it was time to give Chrome extension development another shot. This time,<br />
I had another motive; I wanted to prove that developing a Chrome extension using <a href="https://reactjs.org/" target="_blank" rel="noopener" class="l" hreflang="en">React</a>,<br />
<a href="https://typescriptlang.org/" target="_blank" rel="noopener" class="l" hreflang="en">TypeScript</a>, and <a href="https://esbuild.github.io/" target="_blank" rel="noopener" class="l" hreflang="en">esbuild</a> could make the development<br />
process enjoyable.</p>
<p>So I set off creating a folder to house my project, and <code>yarn add</code>-ed esbuild, typescript, and react. I had a rough idea<br />
of what I wanted; react for the content script (to inject into the page), and esbuild to transpile and bundle my .tsx into .js that<br />
Chrome could consume directly. I started to plan down what I would make my extension do, and remembered why I didn‚Äôt enjoy developing<br />
extensions - runtime realms.</p>
<p>Chrome‚Äôs extension <a href="https://developer.chrome.com/docs/extensions/mv3/architecture-overview/#arch" target="_blank" rel="noopener" class="l" hreflang="en">runtime</a> is essentially<br />
split into three ‚Äòrealms‚Äô (I‚Äôm not sure if this is the correct name for it, but this is my post, so I‚Äôll call it that going<br />
forward); the content script, the background script, and the popup. (I know chrome also allows for new tab pages and the like,<br />
but from my <em>limited</em> experience these act more or less like popups). Due to the sandboxing<br />
nature and the way the extension-land is set up, most cross-realm communication need to take place<br />
via <a href="https://developer.chrome.com/docs/extensions/mv3/messaging/" target="_blank" rel="noopener" class="l" hreflang="en">message passing</a>. So one realm needs to send, and<br />
the receiving end needs to have a listener set up to respond to the messages. This is all fine and understandable, but when you look deeper<br />
it becomes clear that the three realms don‚Äôt behave the same way and don‚Äôt have the same lifecycle steps. Now this is what annoyed me,<br />
because as the developer, I had to manage not only the communication between the realms, but the fact that they are all in their own separate<br />
contexts. Surely there was something I could do to bridge this gap and abstract it behind an api that would handle that for me?</p>
<p><img src="/images/chrome-extension-architecture.png" alt="Extensions Architecture as seen on developer.chrome.com" loading="lazy" /></p>
<p>I started by thinking of a simple (probably useless) scenario. I‚Äôd have the content-script injecting a React component with a simple<br />
counter state. Then I should be able to update the state from the extension popup by calling the same function as the content-script -<br />
all without having to think about messaging and listeners. And to be extra spicy, be able to trigger a ‚Äòopen new tab‚Äô function that lives<br />
in the background-script, from both the content-script and the popup.</p>
<p>First thing was to create a class that would handle the communication itself between realm boundaries, making sure to handle function calls<br />
from different realms first. I didn‚Äôt want to make every function in a realm accessible to other realms, so I added a <code>registerInterfaces(...)</code><br />
method that would allow you to expose specific functions to other realms. This would then become accessible on that realm‚Äôs script instance.<br />
After this I had to make sure that the incoming-messages listeners where set up, so I moved that to a <code>tap()</code> method that should be called<br />
to set up the listeners. This was mostly done to satisfy my future react-related use-case where I‚Äôd need to be able to <code>untap()</code> to clean up<br />
in <code>useEffect(...)</code> calls.</p>
<p>After some playing about and end-to-end user-testing, I ended up with something that completed my initial plan, so<br />
I <a href="https://www.npmjs.com/package/@projectfunction/excom" target="_blank" rel="noopener" class="l" hreflang="en">published</a>. Now I can have a handler in any realm, and easily<br />
send messages and call exposed functions in other realms without having to think too hard about messaging and checking each message.<br />
Instead, I can do this:</p>
<pre><code class="lang-typescript">// In my background.ts
import {backgroundScriptHandler} from &quot;@projectfunction/excom&quot;;

backgroundScriptHandler.tap();

backgroundScriptHandler.registerInterfaces({
	openTab: async function(url){
		let tab = await chrome.tabs.create({ url, active: false });
		console.log(`opened tab with id ${tab.id}, from background script`);
		return 25;
	}
});
</code></pre>
<p>and then in my content-script or popup, I can do:</p>
<pre><code class="lang-typescript">import {popupScriptHandler} from &quot;@projectfunction/excom&quot;;

popupScriptHandler.tap(); //somewhere at the start so it runs once

const returnValue = await popupScriptHandler.backgroundMethods.openTab('https://youtube.com');

// returnValue is 25
</code></pre>
<p>Once this was made and published<sup><a href="#reference1" target="_blank" rel="noopener" class="l" hreflang="en">[1]</a></sup>, I decided to create a dummy extension<br />
that allows me to search through my open tabs through a search box that is injected on any page I‚Äôm on, with the background script<br />
handling the actual search and filtering. The experience was so much nicer; I could focus purely on calling methods and UI, and the library<br />
did the rest.</p>
<p>Who knows where this may lead me? Maybe I‚Äôll become a full-time extensions developer üòè</p>
<p>‚Äì</p>
<p>P.S. I am aware there may be other ways to tackle this and that this potentially has flaws that I am too tired to look into, but this<br />
little exploration was worth it - and if anything, it was just the push I needed to get into extensions.</p>
<hr />
<p><sup id="reference1">[1]</sup> <a href="https://github.com/daryl-cecile/excom" target="_blank" rel="noopener" class="l" hreflang="en">Excom Repository</a></p>
]]></content>
        <author>
            <name>Daryl Cecile</name>
            <email>darylcecile@gmail.com</email>
            <uri>https://darylcecile.net</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Doc Journey: ‚ñ≤Vercel Edition]]></title>
        <id>vercel-doc-journey</id>
        <link href="https://darylcecile.net/notes/vercel-doc-journey"/>
        <updated>2022-02-16T00:00:00.000Z</updated>
        <content type="html"><![CDATA[<InfoBox>
<strong>Disclaimer:</strong> While this post outlines some of the issues I've had with the Vercel documentation, it in no way discredits the amazing work the Vercel Team have been doing. Documentation in this industry needs work as a whole, and for the most part, Vercel's documentation has helped me out countless times. This post is intended to note my discoveries, thought-processes, and eventual solution to the issues I came across, as I journey through the documentation. The outcome of this basic-level research will be published and open-sourced.
</InfoBox>
<p><strong>Update:</strong> Last Thursday (24th Feb), I had the opportunity to chat to <a href="https://twitter.com/itsmegbird" target="_blank" rel="noopener" class="l" hreflang="en">Meg</a> from Vercel about my experience and journey with the API docs. I have <a href="#update-improvement-suggestion" target="_blank" rel="noopener" class="l" hreflang="en">extended</a> this note to include my take on how it could be improved.</p>
<hr />
<p>Last week <a href="https://twitter.com/rizbizkits" target="_blank" rel="noopener" class="l" hreflang="en">Rizwana</a> discovered a cute little <a href="https://www.cobdenplace.co.uk/" target="_blank" rel="noopener" class="l" hreflang="en">Co-working space</a> in Nottingham. We had been on the lookout for a place where we could carry out some work for <abbr title="ProjectFunction">PF</abbr><sup><a href="#reference1" target="_blank" rel="noopener" class="l" hreflang="en">[1]</a></sup>, as well as potentially run some of our upcoming courses. At the time, I was making some upgrades to <a href="https://projectfunction.io/how-we-teach" target="_blank" rel="noopener" class="l" hreflang="en">PF Campus</a>, trying to enable deployments for students to be able to deploy their work to a portfolio as part of their submission process. With previous versions of Campus being on a dedicated server, we offered learners with the option to privately deploy (onto our infrastructure) or publicly via Netlify; however, now that it has moved onto a serverless model, it was time to revisit the options.</p>
<p><img src="/images/campus-deploy1.png" alt="Campus v1 Deployment to Netlify" loading="lazy" /></p>
<p>As the great advocate that she is, she asked if there was a reason we weren‚Äôt deploying on Vercel. After all, Campus v2 was already deployed on there, so it only made sense.</p>
<p>Early on in 2021, I had the exact same thought. However, after doing a deep dive, I realised that there was no available packages at the time that interfaced well with Vercel to allow us to programmatically manage projects and deployments the way we needed. And upon further venturing, I came to accept that (a) the available REST APIs was in too much of an early stage, and (b) developing a wrapper around it would be more work than I was able to put in given my day-to-day schedules, and the state of Vercel Documentation back then. In fact the latter was the exact reason that initially pushed me to use Netlify to deploy.</p>
<p>Now before anyone jumps onto the ‚Äúbut Daryl, they provide a CLI‚Äù - I know! But it was not convenient and using it programmatically in our setup felt like a hack (we weren‚Äôt using a command-line interface). So it was best to avoid it. ü§∑üèΩ‚Äç‚ôÇÔ∏è</p>
<p>After a nudge to give the APIs a second consideration, I thought ‚Äò<em>Well surely the REST APIs would have matured a little by now</em>‚Äô, and it did ‚Ä¶kind of. While the APIs looked a lot more stable with <a href="https://vercel.com/docs/rest-api#introduction/api-basics/versioning" target="_blank" rel="noopener" class="l" hreflang="en">different versions</a> to avoid breaking changes, it still felt a little overwhelming; it felt like a lot of work had to be done on my part to figure out how things work and what the processes were. Some pages had incomplete documentation, while others had incorrect data-types listed for parameters.</p>
<h3>Potential Solution? ü•ä</h3>
<p>Despite the issues with the doc, I decided to delve into it a bit more. If I could figure out the missing details and expected data for the API endpoints, I could create a wrapper around the API. This became the plan:</p>
<ul class="para">
<li>Set up a project for the wrapper</li>
<li>Consolidate the must-have features (based on PF use-case)</li>
<li>Work my way through the endpoints and create wrapper functions</li>
<li>Write a script that calls each wrapper function, setting up projects and deployments, checking the status, and tearing them down.</li>
</ul>
<p>I set up a <a href="https://github.com/daryl-cecile/next-controls" target="_blank" rel="noopener" class="l" hreflang="en">small project</a> locally, and once I had all the dependencies in place to package my Typescript project, the journey through the docs began. Going into it, I only hoped the docs would be enough to fill the gaps; however, after looking through the endpoint documentation, I immediately fell in love with the addition of the <code>interaface</code> and <code>type</code> definitions (written in TS) for responses! It made the guesswork a little easier; and seeing as I was already using Typescript, it was a case of copy-pasta üçù.</p>
<p><img src="/images/vercel-docs-response-interface.png" alt="Sample response interface for the Aliases Endpoint" loading="lazy" /></p>
<p>Seeing the typescript interface and type definitions brought about a sense of excitement but that feeling was quickly followed by a sense of defeat once I remembered how incomplete the documentation was as a whole.</p>
<h3>Missing Definition</h3>
<p>The first gripe was to do with the <a href="https://vercel.com/docs/rest-api#endpoints/deployments/create-a-new-deployment" target="_blank" rel="noopener" class="l" hreflang="en">Create new deployment</a> endpoint. It allows you to create deployments using a git source or by attaching files as part of the request. The latter made more sense for our use-case, so I tried to find out what the format and properties should be. Unfortunately, there was no information on this - the little bit of info I found suggested that the <code>files</code> property accepted ‚Äúa list of objects with the files to be deployed‚Äù. What was this file object? I set up a quick function which made the call to the API endpoint, and attempted to pass the files as a simple key-value object:</p>
<pre><code class="lang-typescript">function CreateDeployment({bearer, forceNew, ...body}:CreateDeploymentParams){
    return axios.request&lt;CreateDeploymentResponse&gt;({
        method: &quot;post&quot;,
        url: DEPLOYMENTS_ENDPOINT_V13,
        headers: {
            &quot;Authorization&quot;: `BEARER ${bearer}`,
            &quot;Content-Type&quot;: &quot;application/json&quot;,
        },
        data: {
            name: body.projectId,
            files: body.files,
            target: body.target
        },
        validateStatus: () =&gt; true // prevent rejection on failed request
    });
}

CreateDeployment({
  target: &quot;staging&quot;,
  projectId: &quot;prj_Ze66UvH4X9...t&quot;,
  bearer: process.ENV.VERCEL_TOKEN,
  forceNew: true,
  files: [
    {name: &quot;index.html&quot;, data: &quot;&lt;h1&gt;Test&lt;/h1&gt;&quot;}
  ]
}).then(res =&gt; {
	console.log('Result:', res)
})
</code></pre>
<p>After giving this a quick run, I received an error <code>bad_request</code> with the following message: <code>Invalid request: 'files[0]' should NOT have additional property 'name'.</code> This was interesting ü§î Even though the documentation didnt seem to point out what was needed, the endpoint was doing some type of check to see what properties are expected. Based on the response, it seems <code>data</code> is likely expected, but surely there must be a property to specify the file name. After giving ‚ÄòfileName‚Äô, and ‚ÄòfilePath‚Äô a try (both returning similar errors), I became frustrated and decided to rethink; even if I did manage to guess the name, there is no way data would work without additional formatting - how would I upload image content as a reasonably-lengthened string?</p>
<p>This realization drove me back to GitHub. Maybe (hopefully?) someone had the same question and found a solution? I searched through all repos including Vercel, but GitHub search really lived up to its bad reputation when it came to code-searching. Luckily they had another tool I could use (currently in beta). Enter <a href="https://cs.github.com" target="_blank" rel="noopener" class="l" hreflang="en">GitHub CodeSearch</a>.</p>
<p><img src="/images/Github-CodeSearch.png" alt="GitHub CodeSearch Homepage" loading="lazy" /></p>
<p>I began searching globally on CodeSearch for the Vercel deployment endpoint and in no time, I came across <a href="https://github.com/teleporthq/teleport-code-generators" target="_blank" rel="noopener" class="l" hreflang="en">TeleportHQ‚Äôs repo</a> which defined an <a href="https://cs.github.com/teleporthq/teleport-code-generators/blob/9f86b0edd484ae9cf6e93849d7f7d3924ce3daa0/packages/teleport-publisher-vercel/src/types.ts#L10" target="_blank" rel="noopener" class="l" hreflang="en">interface</a> named <code>VercelFile</code>. I was a little annoyed I didn‚Äôt try <code>file</code> as a property, but so relieved that there was a drop-in definition I could use.</p>
<p>After dropping in the definition and updating the above code, I gave it another run, and alas the deployment succeeded!</p>
<p><img src="/images/vercel-deploy-result1.png" alt="Successful deployment shown in Vercel" loading="lazy" /></p>
<p>Once this step was cleared, I decided to go back to the documentation and see whether any of the optional query parameters for this endpoint would be of use for PF‚Äôs use-case; and that‚Äôs when I came across the second issue.</p>
<h3>Unknown Types</h3>
<p>This issue ended up being less of a blocker as some guesswork closed the gaps and allowed me to move forward, however I thought it was notable enough as in some cases, there were discrepancies between types.</p>
<p>Looking at the deployment endpoint‚Äôs query param options, I could see some properties were unknown. I checked the documentation‚Äôs own <a href="https://vercel.com/docs/rest-api#introduction/api-basics/types" target="_blank" rel="noopener" class="l" hreflang="en">Types</a> section to see if this had some explanation, but it didn‚Äôt.</p>
<p><img src="/images/Unknown-types-deploy.png" alt="" loading="lazy" /></p>
<p>As ive mentioned before, this was less of an issue and more of an inconvenience as I was able to guess the data types for those parameters.</p>
<h3>Final Notes: PF + ‚ñ≤ = üíú</h3>
<p>As noted by Vercel, changes that they make to the APIs will be outlined in their changelogs, and it is possible that some outlined issues above could have cropped up there, however, this exploration was purely to build a wrapper around the API for consumption by PF (as I couldn‚Äôt find a suitable one that already existed).</p>
<p>While this post outlines a couple of issues that I have personally come across while navigating the API endpoints that Vercel provides, It does not reflect the quality of their product or support that they provide. I personally<sup><a href="#reference2" target="_blank" rel="noopener" class="l" hreflang="en">[2]</a></sup> use their platform for numerous projects, and it has served me well; I continue to recommend them to friends and learners at ProjectFunction.</p>
<p>Eventually, I was able to wrap a couple of the endpoints that I thought would be useful for PF, and I have to admit, the journey was fun. Moving forward, I can now integrate Vercel into the core of PFCampus to allow learners to deploy their work to showcase their abilities.</p>
<p>The resulting wrapper can be found on my <a href="https://github.com/daryl-cecile/next-controls" target="_blank" rel="noopener" class="l" hreflang="en">GitHub repo</a>. Feel free to use and contribute!</p>
<p><strong>P.S.</strong> Make sure you <a href="https://twitter.com/@darylcecile" target="_blank" rel="noopener" class="l" hreflang="en">follow me</a> on the bird app for updates ‚úåüèΩ</p>
<br/>
<hr />
<h3>Update: Improvement suggestion</h3>
<p>As mentioned in my update note, I had a chance to chat to <a href="https://twitter.com/itsmegbird" target="_blank" rel="noopener" class="l" hreflang="en">Meg</a> last Thursday (24th Feb) about my experience and journey with the API docs. At the end of our talk, Meg asked ‚ÄúIf you could change anything about the docs site, what would it be?‚Äù and it got me thinking. I remembered not long ago, I had a play around with Slack‚Äôs API and I really loved their <a href="https://api.slack.com/methods/admin.analytics.getFile/test" target="_blank" rel="noopener" class="l" hreflang="en">API Tester</a> feature (This feature can be seen with Google‚Äôs <a href="https://developers.google.com/apis-explorer" target="_blank" rel="noopener" class="l" hreflang="en">API Explorer</a> too). This is what I think Vercel‚Äôs API docs could use.</p>
<p>It would help keep the docs somewhat in-date with API changes, as developers would be able to make a test API call with the required parameters within the doc, and see a realtime response; enabling them to see what is expected with the call, and what to expect as a response. By allowing the dev to select an Endpoint version, it puts emphasis on the idea that the endpoints are versioned, and allows users to see how calls and responses differ between versions. In a nutshell, the test API caller becomes the live documentation; Showing instead of telling.</p>
<br/>
<hr />
<p><sup id="reference1">[1]</sup> <a href="https://projectfunction.io" target="_blank" rel="noopener" class="l" hreflang="en">ProjectFunction</a></p>
<p><sup id="reference2">[2]</sup> This <a href="https://darylcecile.net" target="_blank" rel="noopener" class="l" hreflang="en">website</a> was created using Next.js</p>
]]></content>
        <author>
            <name>Daryl Cecile</name>
            <email>darylcecile@gmail.com</email>
            <uri>https://darylcecile.net</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[useReact: My go-to React Hooks]]></title>
        <id>hooked-on-react</id>
        <link href="https://darylcecile.net/notes/hooked-on-react"/>
        <updated>2022-02-01T00:00:00.000Z</updated>
        <content type="html"><![CDATA[<InfoBox type="warn">
<strong>WIP:</strong> This post is WIP. I plan to continue to update it as my React journey continues. 
</InfoBox>
<p>Two years ago, there was a hype around React; and after a couple of months of trying to avoid<br />
yet-another-javascript-framework, I gave up and decided to see what all the hype was all about. Since that time, Ive not<br />
looked back.</p>
<p>Fast-forward to today, I‚Äôve used React (specifically with Next.js) to create over 4 professional sites, and over 7 side<br />
projects. And throughout that time I have created a few custom hooks that I found myself reusing across projects. These<br />
hooks help simplify my flow of data, and give me finer control over my components. These hooks may not be applicable to<br />
all types of applications, but for the most part they have been super useful for my use-cases:</p>
<h3>UseAsync</h3>
<p>I use this hook to control data flow from async methods. This is usually from using third-party libraries, but can be<br />
useful in other cases:</p>
<pre><code class="lang-typescript">import {useCallback, useEffect, useState} from &quot;react&quot;;

export default function useAsync&lt;T&gt;(method: () =&gt; Promise&lt;T&gt;, dependencies:Array&lt;any&gt; = []) {
	const methodCaller = useCallback(()=&gt;{
		setError(null);
		setStatus(&quot;pending&quot;);
		method().then(response =&gt; {
			setData(response);
			setStatus(&quot;fulfilled&quot;);
		}).catch(err =&gt; {
			setError(err);
			setStatus(&quot;rejected&quot;);
		});
	}, [method, ...dependencies]);
	const [data, setData] = useState&lt;T&gt;(null);
	const [status, setStatus] = useState&lt;&quot;fulfilled&quot; | &quot;pending&quot; | &quot;rejected&quot;&gt;(&quot;pending&quot;);
	const [error, setError] = useState&lt;Error&gt;(null);
	
	return {status, data, error, run:methodCaller};
}

// USAGE
function MyComponent(){
	const {data, run, status} = useAsync(()=&gt; fetchMovieDetail('harry potter'));

	return (
		&lt;div&gt;
			&lt;pre&gt;{status === 'fulfilled' &amp;&amp; JSON.stringify(data, null, '\t')}&lt;/pre&gt;
			&lt;button onClick={run}&gt;{status === 'pending' ? 'Pending' : 'Fetch'}&lt;/button&gt;
		&lt;/div&gt;
	)
}
</code></pre>
<h3>UseRender</h3>
<p>Occasionally, I find myself needing to interface with third-party libraries and need to control the rendering cycle<br />
manually. React is good at managing rendering cycles in most cases, but in those rare situations like when you are using<br />
third-parties like Monaco, this may come in handy:</p>
<pre><code class="lang-typescript">import {useReducer} from &quot;react&quot;;

export default function useRender() {
	const [count, increment] = useReducer(n =&gt; n + 1, 0);
	
	return {render:increment}
}
</code></pre>
<h3>UseEvent</h3>
<p>While working on a previous side project, I found myself adding event listeners to dom events on a regular basis, so I<br />
ended up with the following:</p>
<pre><code class="lang-typescript">import {useCallback, useEffect, useState} from &quot;react&quot;;

export default function useEvent(element?: EventTarget) {
	const [eventListeners, setEventListeners] = useState&lt;Record&lt;string, ((ev: Event) =&gt; void)&gt;&gt;({});
	
	const addEventListener = useCallback((eventName:string, eventHandler)=&gt;{
		setEventListeners(prev =&gt; {
			return {
				...prev,
				[eventName]: eventHandler
			}
		});
	}, [eventTarget]);
	const removeEventListener = useCallback((eventName:string)=&gt;{
		setEventListeners(prev =&gt; {
			const draft = {...prev};
			delete draft[eventName];
			return draft;
		});
	}, [eventTarget]);

	useEffect(() =&gt; {
		const target = element ?? window;
		const listeners = {...eventListeners};
		
		// addListeners
		Object.entries(listeners).forEach(entry =&gt; {
			eventTarget.addEventListener(entry[0], entry[1]);
		});
		
		// remove old listeners
		return ()=&gt; {
			Object.entries(listeners).forEach(entry =&gt; {
				eventTarget.removeEventListener(entry[0], entry[1]);
			});
		}
	}, [eventListeners]);

	return {
		on:addEventListener,
		off:removeEventListener
	}
}
</code></pre>
<h3>UseLockScroll</h3>
<p>For accessibility-related work, I ended up needing a way to disable scroll lock when a modal component is mounted.</p>
<pre><code class="lang-typescript">import {useLayoutEffect} from &quot;react&quot;;

export default function useLockScroll() {
	useLayoutEffect(() =&gt; {
		const previous = window.getComputedStyle(document.body).overflow;

		document.body.style.overflow = &quot;hidden&quot;;
		
		// undo on unmount
		return () =&gt; {
			document.body.style.overflow = previous
		};
	}, []);
}
</code></pre>
<h3>Note</h3>
<p>For now these have been my most used hooks. As my React journey continues, I may update this post to include<br />
new hooks and explain their uses.</p>
<p>‚úåüèΩ</p>
]]></content>
        <author>
            <name>Daryl Cecile</name>
            <email>darylcecile@gmail.com</email>
            <uri>https://darylcecile.net</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Something needs a Rejig üëÄ]]></title>
        <id>something-needs-a-rejig</id>
        <link href="https://darylcecile.net/notes/something-needs-a-rejig"/>
        <updated>2020-05-26T23:00:00.000Z</updated>
        <content type="html"><![CDATA[<InfoBox type="warn">
<strong>Edit:</strong> This post was scheduled to be published on the 8th of April, but due to the COVID pandemic and the uni-related consequences it brought about, I had to delay the post. However, I can now confirm that I am now working on another project idea that I have a genuine interest in and enjoy working on.
</InfoBox>
<p>As some of you may know, I am currently in the process of completing my final year project (FYP). Up until recently, I have been doing a dementia based project for my FYP. This included a web portal for carers to manage patients, as well as an Android app which the patients would have on their phone. The app was to help assist with daily tasks such as reminders to take medication, assist in making calls to carer and family members, as well as provide daily mental stimulation games.</p>
<p>The completed app itself would be designed with little-to-no learning curve, so that patients with stage 1 to 3 of dementia and those with memory deficiency would be able to use it with no problem. This would have relied heavily on the principal of repetition and inforcement.</p>
<p>The web platform would be accessible by the carer (who could potentially be assigned to multiple patients) and would allow them to remotely update medication reminders, update contact information, change the mental stimulation games and track behavioural changed based on time taken to carry out each task over time.</p>
<p>Initially, I had so much excitement and ideas for this project, but over time I became more and more demotivated and lost all excitement and will to work on it. This got to the point where it made development depressing and I hated it üò≠üò≠</p>
<p>So I got in touch with my Tutor and Module leader and requested a change of topic. The initial response was ‚ÄúNormally; we‚Äôd say its too late, but due to circumstances we could look into the possibility. Do you have a rough idea of how long it will take?‚Äù. Once I calculated the time and sent a response I felt pretty sure this would be it‚Ä¶ I‚Äôm still waiting.</p>
<p>I‚Äôve decided to take the risk and start working on the new project (called <em>rejig</em> - thanks to my friend <a href="https://twitter.com/rizbizkits" target="_blank" rel="noopener" class="l" hreflang="en">@rizbizkits</a> for the name idea) despite the fact I am yet to hear back from the module leader. What i‚Äôve discovered is that i‚Äôm much happier doing this work than I was when I was doing work on the previous topic.</p>
<p>‚Äú<em>I kindly await your response‚Ä¶</em>‚Äù</p>
]]></content>
        <author>
            <name>Daryl Cecile</name>
            <email>darylcecile@gmail.com</email>
            <uri>https://darylcecile.net</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[I did a thing... PyroGist üë®üèΩ‚Äçüíª]]></title>
        <id>did-a-thing-pyro</id>
        <link href="https://darylcecile.net/notes/did-a-thing-pyro"/>
        <updated>2020-03-05T00:00:00.000Z</updated>
        <content type="html"><![CDATA[<p>As some of you might have heard, ProjectFunction is partnering up with NTU to deliver a 2 weeks intensive course. As with other PF courses we have run in the past, this one will be open to those who are under-represented in the industry. As part of this programme, learners will have the opportunity to take part in workshops and attend talks related to working in tech. Additionally, they will have the opportunity to apply all the skills they gather and the knowledge they gain, to design and implement their own website.</p>
<p>In preparation for this, I have started writing up some documentation and tasks for the learners. While doing the documentation for this, I came across 2 issues; firstly, there was no way to natively embed non-gist GitHub code into webpages, and secondly the option provided by GitHub does not make it difficult, if not impossible to restyle.</p>
<p>As it currently stands, GitHub allows you to embed gists into your webpage using the <em>embed</em> option. But this comes in the form of a <code>&lt;script&gt;</code> tag that you insert into the page. This makes embedding simple, but at the cost of interface customizations. So I made my own. Now I know there are other solutions out there such as <a href="https://github.com/robertkrimen/gist-it" target="_blank" rel="noopener" class="l" hreflang="en"><em>gist-it</em></a> but I thought it would be a good challenge to implement my own.</p>
<p>My main priority when creating this was simplicity and customizability. I wanted the library to be easy to use, but also provide some customization options. Furthermore, I wanted to keep the element in the light DOM (outside of the shadow DOM) to ensure users could go even further with their customizations by using custom CSS.</p>
<p>Here is what I ended up creating:</p>
<img src="/images/PyroGist_Example_Screenshot.png" alt="Screenshot of PyroGist in use" loading="lazy" />
<p>As pictured above, the result allows the user to match the style of the embedded content to fit their page design. In order to use the library, you first have to link the stylesheet and put the script in the <code>&lt;head&gt;</code> of the destination document. Once you have this, PyroGist can be initialized.</p>
<link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/styles/github.min.css">
<script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/highlight.min.js"></script>
<link rel="stylesheet" href="//darylcecile.net/scripts/PyroGist_v1/PyroGist.css">
<script src="//darylcecile.net/scripts/PyroGist_v1/PyroGist.js"></script>
<div id="preview">
PyroGist("#preview",{
    url: "https://github.com/daryl-cecile/MiniTest-1/blob/master/test.js",
    theme: "normal",
    autoFit: true,
    highlight: true
});
</div>
<p>The example above shows how to embed a simple mock test file from a GitHub repository. If you wish to embed custom content (not hosted on GitHub), you can put the content directly into the body of the containing element and ignore the ‚Äòurl‚Äô option.</p>
<div id="preview2">
PyroGist("#preview2",{
    name: "My custom file",
    theme: "normal",
    autoFit: true,
    highlight: true
});
</div>
<p>Currently, the highlighting is done by the highlightjs library (which users have to link themselves if they want syntax highlighting). However, the default colors can be easily overridden using custom CSS.</p>
<script>
PyroGist("#preview",{
    name: "test.js",
    theme: "normal",
    autoFit: true,
    highlight: true
});
    
PyroGist("#preview2",{
    name: "example",
    theme: "normal",
    autoFit: true,
    highlight: true
});

console.log('Loaded PyroGist instances');
</script>
<p>Even though this library has a long way to go, I feel fairly comfident that it has met my initial goals and can serve its original purpose. In the near future, I intend to make GitHub gists embeddable via url. Additionally, I may create an adapter or customElement to automatically load the previews directly from markup (something like <code>&lt;pyro-gist url=&quot;/file/example.js&quot;&gt;&lt;/pyro-gist&gt;</code>).</p>
<p>Until then‚Ä¶ ‚úåüèΩ</p>
<p>‚Äì</p>
<p><em>P.S. This library can be found <a href="https://github.com/daryl-cecile/PyroGist" target="_blank" rel="noopener" class="l" hreflang="en">here</a>, on my GitHub account!</em></p>
]]></content>
        <author>
            <name>Daryl Cecile</name>
            <email>darylcecile@gmail.com</email>
            <uri>https://darylcecile.net</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[PF February Update ‚ö°Ô∏èüßôüèΩ‚Äç‚ôÇÔ∏è]]></title>
        <id>pf-february-update</id>
        <link href="https://darylcecile.net/notes/pf-february-update"/>
        <updated>2020-02-29T00:00:00.000Z</updated>
        <content type="html"><![CDATA[<p>This month‚Äôs entry is comparatively short to the last, as it is not what I had initially planned to post. This is due to me spending almost an hour and half doing the write up for the original post to then decide at the very last minute that I needed more time to refine the wording of the content. So here is a short post üòÇ</p>
<p>As of two weeks ago, Rizwana and I have made the decision to overhaul the ProjectFunction website. This decision is a result of the increased intake in students. When I first wrote the original website, It was done very haphazardly. At the time, it felt more important to launch something that the learners could make use of to enhance their experience of ProjectFunction; and so I prioritised meeting a delivery deadline over maintainability, and as you can guess, this has not gone down well. ü§¶üèΩ‚Äç‚ôÇÔ∏è</p>
<p>The backend for the original database was written in PHP and the data was maintained in a (very) <em>loosely</em> relational MySQL database. Even though this allowed me to make changes to the database structure within minutes without losing any data, it did lead to a lot of redundant data. During the development of the website, I knew deep down it would need rewriting from the ground up. After all, the website was made as a proof-of-concept, and it was so well received that we ended up adding more features instead of re-writing. But now it is time.</p>
<p>Due to our future plans and use-cases involving user-automated-tests, we have decided to move over to a NodeJS backend. This would mean we could re-use some of the libraries we have created over the year in both the front and backend, as well as run all user-automated-tests on our own end (instead of using heroku and hooks and hacky magic stuff üßôüèΩ‚Äç‚ôÇÔ∏è)</p>
<p>Last week, I started some work on the new system, setting up the server, services, and database structure. The number one difficulty I had with this process was moving the data we had over from the current (un)relational database, to our new one. Because of how much redundant data there was, as well as the lack of relations between some of the tables, I ended up having to create a data dump of the old database, then use a js script to read, analyse and re-associate each of the data entries so that they could be seeded into the new fully-relational database. Surprisingly, this process only took 4 minutes.</p>
<p>So far, the database is fully set up and functional. All that is left to do now is move-over some of the old php-based views to EJS, and create routers for the new website. As for the design of the new website, we intend to keep the same look and feel, so the stylesheets we already have will be reused.</p>
<p>As we‚Äôve done in the past, we wont be minifying or obfuscating any of the resources. This was a conscious decision to enable learners to view the source of our website and see an untouched version of the resources. And based on the feedback we got from some learners, this was a good move as it enabled them to understand how we implemented some parts of our website.‚ö°Ô∏è</p>
<p>Over the next few weeks, we intend on working solely on the LMS side of the ProjectFunction website, so that it is ready for use in June. During this time, some parts of the website may change (for the better) as we decide what to keep, remove, and update. Once the site is ready for launch, we shall decomission the old LMS, and start working on moving the current visitor-facing site (i.e. The ProjectFunction homepage) over to NodeJS.</p>
<p>Until then‚Ä¶ ‚úåüèΩ</p>
<p>‚Äì<br />
<em>P.S. I realise now that this wasn‚Äôt exactly a ‚Äúshort‚Äù entry, but I know if I go back to make changes, this post wont be out on time‚Ä¶ So, here</em> ü§∑üèΩ‚Äç‚ôÇÔ∏è</p>
<p><em>P.P.S. We got us some customized ProjectFunction business cards!</em></p>
<img src="/images/business_card_1.jpeg" alt="Me holding my new PF business card" loading="lazy" />
]]></content>
        <author>
            <name>Daryl Cecile</name>
            <email>darylcecile@gmail.com</email>
            <uri>https://darylcecile.net</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Futuristic Pursuit üê£]]></title>
        <id>futuristic-pursuit</id>
        <link href="https://darylcecile.net/notes/futuristic-pursuit"/>
        <updated>2020-01-31T00:00:00.000Z</updated>
        <content type="html"><![CDATA[<p>For the past 4 years, I‚Äôve been telling myself that I will be ready for adult life when it comes - and until recently, that was true. I‚Äôve always had a clear image of what I wanted to achieve in the future; Since college, I knew that I wanted to start my own (side?) project/company, and find a job in development somewhere that is chill. But now that I am finally about to step into proper ‚Äúadult life‚Äù, I cant help but feel like i‚Äôm not as ready as I thought üò¨</p>
<p>The plan throughout uni was that i‚Äôd move back to London once my degree was over, find a job somewhere there as a software developer, and maybe start a company of my own (on the side). In fact, I was so confident in that plan until recently. Last year, during my time on placement at a company in Nottingham called ERT, a dear friend of mine (<a href="https://twitter.com/rizbizkits" target="_blank" rel="noopener" class="l" hreflang="en">@rizbizkits</a>) and I co-founded an initiative called ProjectFunction (find out about it <a href="https://projectfunction.io" target="_blank" rel="noopener" class="l" hreflang="en">here</a>).</p>
<p>ProjectFUnction has been quite successful, however, I never expected it to gain so much traction in the Nottingham Tech community. This made me realize that I would need to stick around in Notts a bit longer after uni to see it through its untapped potential. After some mental back and forth, I accepted that my plans to go back home to London would have to be put on hold. So now, I find myself looking for a place to stay for next year (as I‚Äôm currently staying in a student-only accomondation).</p>
<p>I‚Äôve been looking around Nottingham for a chill 2 bedroom flat - ideally one with parking, cat-friendly and on the ground floor. After all, Panther needs a place to stay too üòº</p>
<img src="/images/pantherCat.jpg" alt="Panther cat doing a big stretch on the bed" loading="lazy" />
<p>The places i‚Äôve seen so far are quite afordable too, but then I realized, if I‚Äôm staying in Nottingham, I need to start looking for places <em>in</em> Notts ü§¶üèΩ‚Äç‚ôÇÔ∏è. So I started looking‚Ä¶</p>
<p><em>In retrospect, I realize that moving away from home to university in Nottingham was nothing compared to the ‚Äúadult life‚Äù im finding myself flying towards this year. In fact, I‚Äôm not even sure I am ready for it in all honesty. But here we are ü§∑üèΩ‚Äç‚ôÇÔ∏è</em></p>
<p>In December, my friend Rizwana and I were discussing what kind of places I was looking for in terms of jobs, and after giving it some thought, considering my past experiences, it became clear that I had a rough idea of what I wanted üëáüèΩ</p>
<ul class="para">
<li>A startup-like environment would be great (1 - 30 people)</li>
<li>Being flexible enough to work from home</li>
<li>Having personal-development budget and opportunities</li>
<li>No crunch-time (clear seperation of work and personal life)</li>
<li>Countless opportunities for career-progression</li>
<li>Diverse and inclusive teams</li>
<li>Experimental when it comes to implementing new ideas</li>
<li>A place that is not afraid to make their own tools to aid development</li>
<li>Open-souce contributors would be nice</li>
<li>Friendly/community-like team</li>
<li>A place that is happy to work and give back to the community</li>
<li>Somewhere that uses cutting edge technology</li>
</ul>
<p>All in all, I have a clear idea of the kind of workplace where I want to work as a Web developer üë®üèΩ‚Äçüíª. Now I just need to find it and make it happen. I guess i‚Äôll find out when it gets to it. I just hope that the place I find meets those points as closely as possible ü§ûüèΩ. Once I do that, I can finally start focusing on ProjectFunction, and the many plans we have for it in the near future!</p>
]]></content>
        <author>
            <name>Daryl Cecile</name>
            <email>darylcecile@gmail.com</email>
            <uri>https://darylcecile.net</uri>
        </author>
    </entry>
</feed>